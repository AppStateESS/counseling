"use strict";var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},TextInput=React.createClass({displayName:"TextInput",getDefaultProps:function(){return{label:"",placeholder:"",handleBlur:null,required:!1,handlePress:null,handleChange:null,inputId:null,value:"",tabIndex:null}},handleBlur:function(a){this.props.required&&a.target.value.length<1&&$(a.target).css("border-color","red"),this.props.handleBlur&&this.props.handleBlur(a)},handleFocus:function(a){$(a.target).css("border-color","")},render:function(){var a="",b="";return this.props.label.length>0?(this.props.required&&(b=React.createElement("i",{className:"fa fa-asterisk text-danger"})),a=React.createElement("label",{htmlFor:this.props.inputId},this.props.label)):a=null,React.createElement("div",{className:"form-group"},a,b,React.createElement("input",{type:"text",className:"form-control",id:this.props.inputId,name:this.props.inputId,placeholder:this.props.placeholder,onFocus:this.handleFocus,onChange:this.props.handleChange,onBlur:this.handleBlur,onKeyPress:this.props.handlePress,value:this.props.value,tabIndex:this.props.tabIndex}))}}),FormMixin={componentDidMount:function(){this.loadData()},closeForm:function(){this.setState({showForm:!1})},showForm:function(){this.setState({showForm:!0})},saveFailure:function(){this.setState({saveFail:!0})}},sortable={fixHelper:function(a,b){return b.children().each(function(){$(this).width($(this).width())}),b},loadSortable:function(){$(this.refs.sortRows).sortable({handle:".handle",helper:this.fixHelper,cancel:"",update:this.updateSort,axis:"y",containment:"#sortBox"}).disableSelection()},resortReact:function(a,b,c,d){var e=null,f=null,g=null,h=[],i=0,j=0;return a.forEach(function(a,h){j=parseInt(a.id,10),void 0!==c&&j===c?e=a:j===b?f=a:void 0!==d&&j===d&&(g=a)}),null===e&&(f.sorting=1,i++,h.push(f)),a.forEach(function(a,b){f.id!==a.id&&(i++,a.sorting=i,h.push(a)),null!==e&&e.id===a.id&&(i++,f.sorting=i,h.push(f))}),h}},colorPicker={pickColor:function(a,b){b.preventDefault(),this.setState({color:a})}},PickColor=React.createClass({displayName:"PickColor",getDefaultProps:function(){return{handleClick:null}},render:function(){return React.createElement("div",null,React.createElement("button",{className:"btn btn-default",onClick:this.props.handleClick.bind(null,"default")}," ")," ",React.createElement("button",{className:"btn btn-primary",onClick:this.props.handleClick.bind(null,"primary")}," ")," ",React.createElement("button",{className:"btn btn-success",onClick:this.props.handleClick.bind(null,"success")}," ")," ",React.createElement("button",{className:"btn btn-info",onClick:this.props.handleClick.bind(null,"info")}," ")," ",React.createElement("button",{className:"btn btn-warning",onClick:this.props.handleClick.bind(null,"warning")}," ")," ",React.createElement("button",{className:"btn btn-danger",onClick:this.props.handleClick.bind(null,"danger")}," "))}}),Reasons=React.createClass({displayName:"Reasons",mixins:[FormMixin],getInitialState:function(){return{showForm:!1,reasons:null,saveFail:!1,currentEdit:null}},loadData:function(){$.getJSON("counseling/Admin/Settings/Reason",{command:"list"}).done(function(a){this.setState({reasons:a})}.bind(this))},setCurrentEdit:function(a,b){var c=null;null!==a&&(c={id:a,section:b}),this.setState({currentEdit:c})},render:function(){var a=null,b=null,c=null;return this.state.showForm?a=React.createElement(ReasonForm,{closeForm:this.closeForm,reload:this.loadData,fail:this.saveFailure}):b=React.createElement("button",{className:"btn btn-success",onClick:this.showForm,style:{marginBottom:"1em"}},"Add reason",React.createElement("i",{className:"fa fa-caret-down"})),this.state.saveFail&&(c=React.createElement("div",{className:"alert alert-danger"},React.createElement("strong",null,React.createElement("i",{className:"fa fa-exclamation-triangle"}),"Error:"),"Reason save failed")),React.createElement("div",null,React.createElement("div",{className:"settings-form-area"},React.createElement("div",{style:{position:"relative"}},a),b),c,React.createElement("div",{className:"settings-listing"},React.createElement(ReasonList,{reasons:this.state.reasons,reload:this.loadData,currentEdit:this.state.currentEdit,setCurrentEdit:this.setCurrentEdit})))}}),ReasonList=React.createClass({displayName:"ReasonList",getDefaultProps:function(){return{reasons:null,reload:null,currentEdit:0,setCurrentEdit:null}},render:function(){var a=null;return this.props.reasons&&(a=this.props.reasons.map(function(a,b){return React.createElement(ReasonRow,_extends({key:b},a,{reload:this.props.reload,currentEdit:this.props.currentEdit,setCurrentEdit:this.props.setCurrentEdit}))}.bind(this))),React.createElement("div",null,a)}}),ReasonRow=React.createClass({displayName:"ReasonRow",getInitialState:function(){return{id:0,title:"",description:"",instruction:"",show_emergency:!0,category:0,wait_listed:!1,ask_for_phone:!1,active:!0,sorting:0,color:"default"}},getDefaultProps:function(){return{id:0,title:"",description:"",instruction:"",show_emergency:!0,category:0,wait_listed:!1,ask_for_phone:!1,active:!0,sorting:0,color:"default",reload:null}},componentDidMount:function(){this.setState(this.props)},flipEmergency:function(){$.post("counseling/Admin/Settings/Reason",{command:"flipEmergency",reasonId:this.state.id},null,"json").done(function(a){this.props.reload()}.bind(this))},flipWaitListed:function(){$.post("counseling/Admin/Settings/Reason",{command:"flipWaitListed",reasonId:this.state.id},null,"json").done(function(a){this.props.reload()}.bind(this))},flipAskForPhone:function(){$.post("counseling/Admin/Settings/Reason",{command:"flipAskForPhone",reasonId:this.state.id},null,"json").done(function(a){this.props.reload()}.bind(this))},pickColor:function(a){this.setState({color:a}),$.post("counseling/Admin/Settings/Reason",{command:"pickColor",reasonId:this.state.id,color:a},null,"json").done(function(a){this.props.reload()}.bind(this))},deleteReason:function(a){$.post("counseling/Admin/Settings/Reason",{command:"delete",reasonId:this.state.id},null,"json").done(function(a){this.props.reload()}.bind(this))},updateTitle:function(a){this.setState({title:a.target.value})},updateDescription:function(a){this.setState({description:a.target.value})},updateInstruction:function(a){this.setState({instruction:a.target.value})},resetTitle:function(){this.setState({title:this.props.title})},resetDescription:function(){this.setState({description:this.props.description})},resetInstruction:function(){this.setState({instruction:this.props.instruction})},saveTitle:function(){null!==this.state.title&&0!==this.state.title.length&&$.post("counseling/Admin/Settings/Reason",{command:"setTitle",reasonId:this.state.id,title:this.state.title},null,"json").done(function(a){this.props.reload()}.bind(this))},saveDescription:function(){null!==this.state.description&&0!==this.state.description.length&&$.post("counseling/Admin/Settings/Reason",{command:"setDescription",reasonId:this.state.id,description:this.state.description},null,"json").done(function(a){this.props.reload()}.bind(this))},saveInstruction:function(){null!==this.state.instruction&&0!==this.state.instruction.length&&$.post("counseling/Admin/Settings/Reason",{command:"setInstruction",reasonId:this.state.id,instruction:this.state.instruction},null,"json").done(function(a){this.props.reload()}.bind(this))},render:function(){var a=null;settingsAllowed&&(a=React.createElement("button",{className:"pull-right btn btn-danger btn-sm",onClick:this.deleteReason},React.createElement("i",{className:"fa fa-exclamation-triangle"}),"Delete"));var b=React.createElement(FlipOption,{handleClick:this.flipEmergency,active:"1"==this.state.show_emergency,title:"Reason ask visitor if they have an emergency",label:"Ask emergency",icon:"fa-exclamation-triangle"}),c=React.createElement(FlipOption,{handleClick:this.flipWaitListed,active:"1"==this.state.wait_listed,title:"Choosing this reason puts visitor in the wait queue",label:"Wait list",icon:"fa-hourglass-start"}),d=React.createElement(FlipOption,{handleClick:this.flipAskForPhone,active:"1"==this.state.ask_for_phone,title:"Choosing this asks for the visitor's phone number",label:"Phone number",icon:"fa-phone"}),e="panel panel-"+this.state.color,f={reasonId:this.state.id,reload:this.props.reload,currentEdit:this.props.currentEdit,setCurrentEdit:this.props.setCurrentEdit};return React.createElement("div",{className:e},React.createElement("div",{className:"panel-heading"},React.createElement("span",{className:"badge"},this.state.ordering),a,React.createElement("div",{className:"clearfix"})),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"section"},React.createElement("strong",null,"Title:"),React.createElement(ReasonTitle,_extends({value:this.state.title,reset:this.resetTitle,update:this.updateTitle,save:this.saveTitle},f)))),React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"section"},React.createElement("strong",null,"Description:"),React.createElement(ReasonDescription,_extends({value:this.state.description,reset:this.resetDescription,update:this.updateDescription,save:this.saveDescription},f))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"section"},React.createElement("strong",null,"Instruction:"),React.createElement(ReasonInstruction,_extends({value:this.state.instruction,reset:this.resetInstruction,update:this.updateInstruction,save:this.saveInstruction},f)))),React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"section"},React.createElement("strong",null,"Category:"),React.createElement(ReasonCategory,_extends({value:this.state.category,reset:this.resetInstruction,update:this.updateInstruction,save:this.saveInstruction},f))))),React.createElement("hr",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("span",null,React.createElement("strong",null,"Reason highlight")),React.createElement(PickColor,{handleClick:this.pickColor}))),React.createElement("hr",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-4 text-center"},c),React.createElement("div",{className:"col-sm-4 text-center"},b),React.createElement("div",{className:"col-sm-4 text-center"},d))))}}),ReasonTitle=React.createClass({displayName:"ReasonTitle",getDefaultProps:function(){return{value:"",reasonId:0,reload:null,currentEdit:null,setCurrentEdit:null,update:null,save:null,reset:null}},render:function(){return React.createElement(ReasonValue,_extends({},this.props,{placeholder:"One or two words describing reason. Internal use only.",section:"1"}))}}),ReasonCategory=React.createClass({displayName:"ReasonCategory",getInitialState:function(){return{editMode:!1,instruction:null}},getDefaultProps:function(){return{value:"1",editMode:!1,reasonId:0}},componentDidMount:function(){this.setState({editMode:this.props.editMode,category:this.props.value})},formMode:function(){this.props.setCurrentEdit(this.props.reasonId,4),this.setState({editMode:!0})},saveCategory:function(){$.post("counseling/Admin/Settings/Reason",{command:"setCategory",reasonId:this.props.reasonId,category:this.state.category},null,"json").done(function(a){this.setState({editMode:!1}),this.props.reload()}.bind(this))},updateCategory:function(a){this.setState({category:a.target.value})},closeForm:function(){this.setState({category:this.props.value,editMode:!1})},render:function(){var a=null,b=null;switch(this.props.value){case"0":b="Other";break;case"1":b="Walk-in";break;case"2":b="Appointment"}var c=[{value:"0",label:"Other"},{value:"1",label:"Walk-in"},{value:"2",label:"Appointment"}];return a=this.state.editMode&&this.props.currentEdit.id==this.props.reasonId&&"4"==this.props.currentEdit.section?React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-8"},React.createElement(ReasonSelect,{options:c,match:this.state.category,handleChange:this.updateCategory})),React.createElement("div",{className:"col-sm-4"},React.createElement("button",{className:"btn btn-success",onClick:this.saveCategory},React.createElement("i",{className:"fa fa-check"})),React.createElement("button",{className:"btn btn-danger",onClick:this.closeForm},React.createElement("i",{className:"fa fa-times"})))):React.createElement("div",{style:{cursor:"pointer"},onClick:this.formMode,className:"col-sm-8 editItem",title:"Click to edit"},b),React.createElement("div",null,a)}}),ReasonInstruction=React.createClass({displayName:"ReasonInstruction",getInitialState:function(){return{editMode:!1}},getDefaultProps:function(){return{value:"1",editMode:!1,reasonId:0,reset:null,update:null,save:null,reload:null,currentEdit:null,setCurrentEdit:null}},componentDidUpdate:function(){$(".editItem").focus()},componentDidMount:function(){this.setState({editMode:this.props.editMode})},formMode:function(){this.props.setCurrentEdit(this.props.reasonId,3),this.setState({editMode:!0})},closeForm:function(){this.setState({editMode:!1}),this.props.reset()},save:function(){this.setState({editMode:!1}),this.props.save()},render:function(){var a=null,b=null;b="1"===this.props.value?"Sit down":"See the front desk";var c=[{value:"1",label:"Sit down"},{value:"2",label:"See front desk"}];return a=this.state.editMode&&this.props.currentEdit.id==this.props.reasonId&&"3"==this.props.currentEdit.section?React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-8"},React.createElement(ReasonSelect,{options:c,match:this.props.value,handleChange:this.props.update})),React.createElement("div",{className:"col-sm-4"},React.createElement("button",{className:"btn btn-success",onClick:this.save},React.createElement("i",{className:"fa fa-check"})),React.createElement("button",{className:"btn btn-danger",onClick:this.closeForm},React.createElement("i",{className:"fa fa-times"})))):React.createElement("div",{style:{cursor:"pointer"},onClick:this.formMode,className:"col-sm-8 editItem",title:"Click to edit"},b),React.createElement("div",null,a)}}),ReasonSelect=React.createClass({displayName:"ReasonSelect",getDefaultProps:function(){return{match:"0",handleChange:null,options:null}},render:function(){return React.createElement("select",{defaultValue:this.props.match,className:"form-control",onChange:this.props.handleChange},this.props.options.map(function(a,b){return React.createElement("option",{key:b,value:a.value},a.label)}.bind(this)))}}),ReasonDescription=React.createClass({displayName:"ReasonDescription",getDefaultProps:function(){return{value:null,reasonId:0,reload:null,currentEdit:null,setCurrentEdit:null,update:null,save:null,reset:null}},render:function(){return React.createElement(ReasonValue,_extends({},this.props,{placeholder:"Description of reason. Seen by visitors.",section:"2"}))}}),ReasonValue=React.createClass({displayName:"ReasonValue",getInitialState:function(){return{editMode:!1}},getDefaultProps:function(){return{value:"",reasonId:0,reload:null,currentEdit:null,setCurrentEdit:null,update:null,save:null,placeholder:null,section:0,reset:null}},closeInput:function(){this.setState({editMode:!1}),this.props.reset()},componentDidUpdate:function(){$(".editItem").focus()},openInput:function(){this.props.setCurrentEdit(this.props.reasonId,this.props.section),this.setState({editMode:!0})},save:function(){this.setState({editMode:!1}),this.props.save()},render:function(){var a=null;return a=this.state.editMode&&this.props.currentEdit.id==this.props.reasonId&&this.props.currentEdit.section==this.props.section?React.createElement(LineEdit,{placeholder:this.props.placeholder,update:this.props.update,value:this.props.value,close:this.closeInput,save:this.save}):React.createElement("div",{className:"editItem",onClick:this.openInput,title:"Click to edit"},this.props.value),React.createElement("div",null,a)}}),LineEdit=React.createClass({displayName:"LineEdit",getDefaultProps:function(){return{placeholder:null,defaultValue:null,close:null,update:null,save:null,value:""}},render:function(){return React.createElement("div",{className:"input-group"},React.createElement("input",{type:"text",className:"editItem form-control",placeholder:this.props.placeholder,onChange:this.props.update,value:this.props.value}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-success",onClick:this.props.save},React.createElement("i",{className:"fa fa-check"})),React.createElement("button",{className:"btn btn-danger",onClick:this.props.close},React.createElement("i",{className:"fa fa-times"}))))}}),FlipOption=React.createClass({displayName:"FlipOption",getDefaultProps:function(){return{handleClick:null,active:!1,title:null,label:null,icon:null}},render:function(){var a=null,b="fa fa-lg "+this.props.icon;return a=this.props.active?"text-success":"dim",React.createElement("div",{onClick:this.props.handleClick,className:a,style:{cursor:"pointer"}},React.createElement("i",{className:b,title:this.props.title}),this.props.label)}}),ReasonForm=React.createClass({displayName:"ReasonForm",getInitialState:function(){return{title:"",description:"",instruction:1,category:1,showEmergency:!1,askForPhone:0,waitListed:!0,formError:!1,instructionList:null}},getDefaultProps:function(){return{closeForm:null,reload:null,fail:null}},componentDidMount:function(){$(function(){$('[data-toggle="tooltip"]').tooltip()})},save:function(a){return a.preventDefault(),null===this.state.title||0===this.state.title.length?($("#title").css("borderColor","red"),void this.setState({formError:!0})):null===this.state.description||0===this.state.description.length?($("#description").css("borderColor","red"),void this.setState({formError:!0})):(this.setState({formError:!1}),void $.post("counseling/Admin/Settings/Reason",{command:"save",reasonId:0,title:this.state.title,description:this.state.description,instruction:this.state.instruction,category:this.state.category,showEmergency:this.state.showEmergency,askForPhone:this.state.askForPhone,waitListed:this.state.waitListed},null,"json").done(function(a){this.props.reload()}.bind(this)).fail(function(){this.props.fail()}.bind(this)).always(function(){this.props.closeForm()}.bind(this)))},updateTitle:function(a){this.setState({title:a.target.value})},updateDescription:function(a){this.setState({description:a.target.value})},updateInstruction:function(a){this.setState({instruction:a.target.value})},updateCategory:function(a){this.setState({category:a.target.value})},updateEmergency:function(a){var b=a.target.checked,c=this.state.waitListed;b&&(c=!0),this.setState({waitListed:c,showEmergency:b})},updateAskForPhone:function(a){this.setState({askForPhone:a.target.checked})},updateWaitListed:function(a){var b=a.target.checked,c=this.state.showEmergency;b||(c=!1),this.setState({waitListed:b,showEmergency:c})},closeForm:function(a){a.preventDefault(),this.props.closeForm()},render:function(){return React.createElement("div",{style:{position:"absolute",width:"600px",backgroundColor:"white",border:"1px solid black",padding:"1em",borderRadius:"10px",zIndex:"50"}},React.createElement("form",{method:"post",action:"counseling/Admin/Settings/Reasons"},React.createElement("input",{type:"hidden",name:"command",value:"add"})," ",this.state.formError?React.createElement("div",{className:"alert alert-danger",style:{fontSize:"1em"}},"Please complete all highlighted text inputs."):null,React.createElement("div",{className:"form-group"},React.createElement(TextInput,{inputId:"title",label:"Title",placeholder:"One or two words describing reason. Internal use only.",handleChange:this.updateTitle,required:!0,tabIndex:1,value:this.state.title})),React.createElement("div",{className:"form-group"},React.createElement(TextInput,{inputId:"description",label:"Description",placeholder:"Description of reason. Seen by visitors.",handleChange:this.updateDescription,required:!0,tabIndex:2,value:this.state.description})),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-6"},React.createElement("div",{className:"form-group"},React.createElement("label",null,"Instructions"),React.createElement("p",null,React.createElement("label",{style:{marginRight:"2em"}},React.createElement("input",{type:"radio",name:"instruction",defaultValue:"1",defaultChecked:!0,tabIndex:3,onClick:this.updateInstruction}),"Sit down"),React.createElement("label",null,React.createElement("input",{type:"radio",name:"instruction",defaultValue:"2",tabIndex:4,onClick:this.updateInstruction}),"Front desk"))),React.createElement("div",{className:"form-group"},React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"waitListed",value:"1",checked:this.state.waitListed,onChange:this.updateWaitListed,tabIndex:7}),"Put on wait list  ",React.createElement("i",{className:"fa fa-question-circle",style:{cursor:"pointer"},"data-toggle":"tooltip","data-placement":"right",title:"If checked, the visitor will be placed on the waiting list."}))),React.createElement("div",{className:"form-group"},React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"showEmergency",value:"1",checked:this.state.showEmergency,onChange:this.updateEmergency,tabIndex:5}),"Show emergency question  ",React.createElement("i",{className:"fa fa-question-circle",style:{cursor:"pointer"},"data-toggle":"tooltip","data-placement":"right",title:"If checked, the visitor will be asked if they have an emergency."}))),React.createElement("div",{className:"form-group"},React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"askForPhone",value:"1",checked:this.state.askForPhone,onChange:this.updateAskForPhone,tabIndex:8}),"Ask for phone number  ",React.createElement("i",{className:"fa fa-question-circle",style:{cursor:"pointer"},"data-toggle":"tooltip","data-placement":"right",title:"If checked, the visitor will be asked for their phone number."})))),React.createElement("div",{className:"col-sm-6"},React.createElement(GroupSelect,null))),React.createElement("button",{className:"pull-left btn btn-primary",onClick:this.save,tabIndex:8},React.createElement("i",{className:"fa fa-check"}),"Save reason")," ",React.createElement("button",{className:"btn btn-danger",onClick:this.closeForm,tabIndex:9},React.createElement("i",{className:"fa fa-times"}),"Cancel")))}}),GroupSelect=React.createClass({displayName:"GroupSelect",getDefaultProps:function(){return{}},render:function(){return React.createElement("div",null,React.createElement("label",null,"Category"),React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio",name:"summaryGroup",defaultValue:"1",onClick:this.updateCategory}),React.createElement("i",{className:"fa fa-male fa-lg"}),"Walk-in")),React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio",name:"summaryGroup",defaultValue:"2",onClick:this.updateCategory}),React.createElement("i",{className:"fa fa-clock-o fa-lg"}),"Appointment")),React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio",name:"summaryGroup",defaultChecked:!0,defaultValue:"0",onClick:this.updateCategory}),React.createElement("i",{className:"fa fa-question-circle fa-lg"}),"Other")))}}),Dispositions=React.createClass({displayName:"Dispositions",mixins:[FormMixin],getInitialState:function(){return{dispositions:null,saveFail:!1,currentEdit:null,showForm:!1,currentDisposition:null}},loadData:function(){$.getJSON("counseling/Admin/Settings/Disposition",{command:"list"}).done(function(a){this.setState({dispositions:a})}.bind(this))},setCurrentEdit:function(a){this.setState({currentEdit:a})},setDispositions:function(a){this.setState({dispositions:a})},render:function(){var a=null,b=null;return this.state.showForm?a=React.createElement("div",{className:"form-box"},React.createElement(DispositionForm,{closeForm:this.closeForm,reload:this.loadData,fail:this.saveFailure})):b=React.createElement("button",{className:"btn btn-success",onClick:this.showForm,style:{marginBottom:"1em"}},"Add disposition ",React.createElement("i",{className:"fa fa-caret-down"})),this.state.saveFail&&(alert=React.createElement("div",{className:"alert alert-danger"},React.createElement("strong",null,React.createElement("i",{className:"fa fa-exclamation-triangle"}),"Error:"),"Disposition save failed")),React.createElement("div",null,React.createElement("div",{className:"disposition-form-area"},React.createElement("div",{style:{position:"relative"}},a),React.createElement("div",{style:{height:"50px"}},b)),alert,React.createElement("div",null,React.createElement(DispositionList,{dispositions:this.state.dispositions,reload:this.loadData,currentEdit:this.state.currentEdit,setCurrentEdit:this.setCurrentEdit,showForm:this.showForm,setCurrent:this.setCurrentEdit,setDispositions:this.setDispositions})))}}),DispositionList=React.createClass({displayName:"DispositionList",mixins:[sortable],getInitialState:function(){return{dispositions:null,editRow:null,fail:!1}},getDefaultProps:function(){return{dispositions:null,reload:null,currentEdit:null,setCurrentEdit:null,setDispositions:null}},edit:function(a){this.setState({editRow:a})},"delete":function(a){$.post("counseling/Admin/Settings/Disposition",{command:"delete",dispositionId:a},null,"json").done(function(a){this.props.reload()}.bind(this))},cancel:function(){this.setState({editRow:null})},fail:function(){this.setState({fail:!0})},componentDidMount:function(){this.loadSortable("#disposition-listing")},updateSort:function(a,b){var c=b.item,d=parseInt(c.data("rowid"),10),e=b.item.prev("tr.sorting-row"),f=parseInt(e.data("rowid"),10),g=b.item.next("tr.sorting-row"),h=parseInt(g.data("rowid"),10);$(this.refs.sortRows).sortable("cancel");var i=this.resortReact(this.props.dispositions,d,f,h);this.props.setDispositions(i),$.post("counseling/Admin/Settings/Disposition",{command:"sort",moved:d,next:h,prev:f},null,"json").done(function(a){}.bind(this))},render:function(){var a=null,b=null;return null!==this.props.dispositions&&(a=this.props.dispositions.map(function(a,b){return this.state.editRow===b?React.createElement(DispositionEditRow,_extends({key:a.id},a,{cancel:this.cancel,reload:this.props.reload,fail:this.fail})):React.createElement(DispositionListRow,_extends({key:a.id},a,{edit:this.edit.bind(null,b),"delete":this["delete"]}))}.bind(this))),this.state.fail&&(b=React.createElement("div",{className:"alert alert-danger"},React.createElement("i",{className:"fa fa-exclamation-triangle"}),"  Failed to update disposition")),React.createElement("div",{id:"sortBox"},b,React.createElement("table",{className:"table table-striped"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Action"),React.createElement("th",null,"Name"))),React.createElement("tbody",{ref:"sortRows"},a)))}}),DispositionListRow=React.createClass({displayName:"DispositionListRow",getDefaultProps:function(){return{title:null,icon:"fa-times",color:"default",id:null,edit:null,sorting:null,"delete":null}},deleteCheck:function(){window.confirm("Are you sure you want to remove this disposition?")&&this.props["delete"](this.props.id)},render:function(){var a="fa fa-"+this.props.icon,b="btn btn-block btn-"+this.props.color;return React.createElement("tr",{className:"sorting-row","data-rowid":this.props.id,id:this.props.id},React.createElement("td",{className:"col-xs-3"},React.createElement("button",{className:"btn btn-default handle"},React.createElement("i",{className:"fa fa-arrows"}))," ",React.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.props.edit,title:"Edit disposition"},React.createElement("i",{className:"fa fa-edit"}))," ",React.createElement("button",{className:"btn btn-danger btn-sm",onClick:this.deleteCheck,title:"Delete disposition"},React.createElement("i",{className:"fa fa-times"}))),React.createElement("td",null,React.createElement("button",{className:b},React.createElement("i",{className:a})," ",this.props.title)))}}),DispositionForm=React.createClass({displayName:"DispositionForm",mixins:[colorPicker],getInitialState:function(){return{title:"",color:"default",icon:null,formError:""}},getDefaultProps:function(){return{closeForm:null,reload:null,fail:null,title:"",color:"default",icon:null,dispositionId:0}},componentWillMount:function(a,b){this.setState({title:this.props.title,color:this.props.color,icon:this.props.icon,dispositionId:this.props.dispositionId})},componentDidMount:function(){$("#title").focus()},closeForm:function(a){a.preventDefault(),this.props.closeForm()},updateTitle:function(a){this.setState({title:a.target.value})},save:function(a){return a.preventDefault(),null===this.state.title||0===this.state.title.length?($("#title").css("borderColor","red"),void this.setState({formError:"Title empty"})):(this.setState({formError:!1}),void $.post("counseling/Admin/Settings/Disposition",{command:"save",dispositionId:this.state.dispositionId,title:this.state.title,icon:this.state.icon,color:this.state.color},null,"json").done(function(a){this.props.reload()}.bind(this)).fail(function(){this.props.fail()}.bind(this)).always(function(){this.props.closeForm()}.bind(this)))},pickIcon:function(a,b){b.preventDefault(),this.setState({icon:a})},render:function(){var a=null;return this.state.formError.length>0&&(a=React.createElement("div",{className:"alert alert-danger",style:{fontSize:"1em"}},this.state.formError)),React.createElement("div",{className:"disposition-form"},a,React.createElement(CurrentIcon,{icon:this.state.icon,color:this.state.color,title:this.state.title}),React.createElement("form",{method:"post",action:"counseling/Admin/Settings/Disposition"},React.createElement("input",{type:"hidden",name:"command",value:"add"}),React.createElement(TextInput,{inputId:"title",label:"Disposition title",handleChange:this.updateTitle,required:!0,tabIndex:1,value:this.state.title}),React.createElement("label",null,"Button color"),React.createElement(PickColor,{handleClick:this.pickColor}),React.createElement("label",null,"Icon"),React.createElement(DispositionIcons,{handleClick:this.pickIcon}),React.createElement("hr",null),React.createElement("button",{className:"pull-left btn btn-primary",onClick:this.save,tabIndex:2},React.createElement("i",{className:"fa fa-check"}),"Save Disposition")," ",React.createElement("button",{className:"btn btn-danger",onClick:this.closeForm,tabIndex:3},React.createElement("i",{className:"fa fa-exclamation-triangle"}),"Cancel")))}}),CurrentIcon=React.createClass({displayName:"CurrentIcon",getDefaultProps:function(){return{color:null,icon:null,title:""}},render:function(){var a="btn btn-block btn-lg btn-"+this.props.color,b="fa fa-"+this.props.icon,c=null===this.props.title||0===this.props.title.length?"Sample":this.props.title;return React.createElement("div",{className:"text-center"},React.createElement("button",{className:a},React.createElement("i",{className:b})," ",c))}}),DispositionIcons=React.createClass({displayName:"DispositionIcons",getDefaultProps:function(){return{}},render:function(){return React.createElement("div",null,React.createElement("table",{className:"table"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement(IconButton,{label:"archive",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"automobile",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"balance-scale",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{
label:"ban",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"bank",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"bed",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"bell",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"binoculars",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"book",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"briefcase",handleClick:this.props.handleClick}))),React.createElement("tr",null,React.createElement("td",null,React.createElement(IconButton,{label:"building",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"bullhorn",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"camera",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"coffee",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"cog",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"comment",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"envelope",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"exclamation-circle",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"eye",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"flag",handleClick:this.props.handleClick}))),React.createElement("tr",null,React.createElement("td",null,React.createElement(IconButton,{label:"flask",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"folder-o",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"gavel",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"globe",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"users",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"heart",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"home",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"hourglass-1",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"calendar",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"life-ring",handleClick:this.props.handleClick}))),React.createElement("tr",null,React.createElement("td",null,React.createElement(IconButton,{label:"lightbulb-o",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"male",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"female",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"map-o",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"microphone",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"money",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"music",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"paint-brush",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"pencil",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"phone",handleClick:this.props.handleClick}))),React.createElement("tr",null,React.createElement("td",null,React.createElement(IconButton,{label:"plug",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"print",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"puzzle-piece",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"trophy",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"umbrella",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"user-plus",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"warning",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"wrench",handleClick:this.props.handleClick})),React.createElement("td",null,React.createElement(IconButton,{label:"comments-o",handleClick:this.props.handleClick})),React.createElement("td",null," ")))))}}),IconButton=React.createClass({displayName:"IconButton",getDefaultProps:function(){return{label:null,handleClick:null}},render:function(){var a="fa fa-"+this.props.label;return React.createElement("button",{className:"btn btn-default",onClick:this.props.handleClick.bind(null,this.props.label)},React.createElement("i",{className:a}))}}),DispositionEditRow=React.createClass({displayName:"DispositionEditRow",componentDidMount:function(){$(".form-anchor")[0].scrollIntoView({behavior:"smooth"})},getDefaultProps:function(){return{title:null,color:null,icon:null,cancel:null,reload:null}},render:function(){return React.createElement("tr",null,React.createElement("td",{colSpan:"2"},React.createElement("div",{className:"form-anchor"}),React.createElement("div",{className:"active-form"},React.createElement(DispositionForm,{closeForm:this.props.cancel,reload:this.props.reload,fail:this.props.fail,title:this.props.title,icon:this.props.icon,color:this.props.color,dispositionId:this.props.id}))))}}),Clinicians=React.createClass({displayName:"Clinicians",mixins:[FormMixin],getInitialState:function(){return{showForm:!1,clinicians:null,saveFail:!1,currentEdit:null}},loadData:function(){$.getJSON("counseling/Admin/Settings/Clinician",{command:"list"}).done(function(a){this.setState({clinicians:a})}.bind(this))},setCurrentEdit:function(a){this.setState({currentEdit:a})},setClinicians:function(a){this.setState({clinicians:a})},render:function(){var a=null,b=null;return this.state.showForm?a=React.createElement("div",{className:"form-box"},React.createElement(ClinicianForm,{closeForm:this.closeForm,reload:this.loadData,fail:this.saveFailure})):b=React.createElement("button",{className:"btn btn-success",onClick:this.showForm,style:{marginBottom:"1em"}},"Add clinician ",React.createElement("i",{className:"fa fa-caret-down"})),this.state.saveFail&&(alert=React.createElement("div",{className:"alert alert-danger"},React.createElement("strong",null,React.createElement("i",{className:"fa fa-exclamation-triangle"}),"Error:"),"Clinician save failed")),React.createElement("div",null,React.createElement("div",{className:"clinician-form-area"},React.createElement("div",{style:{position:"relative"}},a),React.createElement("div",{style:{height:"50px"}},b)),alert,React.createElement("div",{className:"clinician-listing"},React.createElement(ClinicianList,{clinicians:this.state.clinicians,reload:this.loadData,currentEdit:this.state.currentEdit,setCurrentEdit:this.setCurrentEdit,setClinicians:this.setClinicians})))}}),ClinicianForm=React.createClass({displayName:"ClinicianForm",getInitialState:function(){return{firstName:null,lastName:null,formError:""}},getDefaultProps:function(){return{closeForm:null,reload:null,fail:null,firstName:null,lastName:null,clinicianId:0}},componentWillMount:function(a,b){this.setState({firstName:this.props.firstName,lastName:this.props.lastName,clinicianId:this.props.clinicianId})},componentDidMount:function(){$("#firstName").focus()},closeForm:function(a){a.preventDefault(),this.props.closeForm()},updateFirstName:function(a){this.setState({firstName:a.target.value})},updateLastName:function(a){this.setState({lastName:a.target.value})},save:function(a){if(a.preventDefault(),null===this.state.firstName||0===this.state.firstName.length)return $("#firstName").css("borderColor","red"),void this.setState({formError:"First name empty"});if(null===this.state.lastName||0===this.state.lastName.length){var b=this.state.firstName.split(" ");return 2===b.length?void this.setState({firstName:b[0],lastName:b[1],formError:"Last name empty. Did you type the full name in the first name field?"}):($("#lastName").css("borderColor","red"),void this.setState({formError:"Last name empty."}))}this.setState({formError:!1}),$.post("counseling/Admin/Settings/Clinician",{command:"save",clinicianId:this.state.clinicianId,firstName:this.state.firstName,lastName:this.state.lastName},null,"json").done(function(a){this.props.reload()}.bind(this)).fail(function(){this.props.fail()}.bind(this)).always(function(){this.props.closeForm()}.bind(this))},render:function(){var a=null;return this.state.formError.length>0&&(a=React.createElement("div",{className:"alert alert-danger",style:{fontSize:"1em"}},this.state.formError)),React.createElement("div",null,a,React.createElement("div",{className:"row"},React.createElement("form",{method:"post",action:"counseling/Admin/Settings/Clinicians"},React.createElement("input",{type:"hidden",name:"command",value:"add"}),React.createElement("div",{className:"col-sm-6"},React.createElement(TextInput,{inputId:"firstName",label:"First name",handleChange:this.updateFirstName,required:!0,tabIndex:1,value:this.state.firstName}),React.createElement("button",{className:"pull-left btn btn-primary",onClick:this.save,tabIndex:2},React.createElement("i",{className:"fa fa-check"}),"Save Clinician")," ",React.createElement("button",{className:"btn btn-danger",onClick:this.closeForm,tabIndex:3},React.createElement("i",{className:"fa fa-exclamation-triangle"}),"Cancel")),React.createElement("div",{className:"col-sm-6"},React.createElement(TextInput,{inputId:"lastName",label:"Last name",handleChange:this.updateLastName,required:!0,tabIndex:1,value:this.state.lastName})))))}}),ClinicianList=React.createClass({displayName:"ClinicianList",mixins:[sortable],getInitialState:function(){return{editRow:null,fail:!1}},getDefaultProps:function(){return{clinicians:null,reload:null,currentEdit:null,setCurrentEdit:null,setClinicians:null}},componentDidMount:function(){this.loadSortable()},edit:function(a){this.setState({editRow:a})},"delete":function(a){$.post("counseling/Admin/Settings/Clinician",{command:"delete",clinicianId:a},null,"json").done(function(a){this.props.reload()}.bind(this))},cancel:function(){this.setState({editRow:null})},fail:function(){this.setState({fail:!0})},updateSort:function(a,b){var c=b.item,d=parseInt(c.data("rowid"),10),e=b.item.prev("tr.sorting-row"),f=parseInt(e.data("rowid"),10),g=b.item.next("tr.sorting-row"),h=parseInt(g.data("rowid"),10);$(this.refs.sortRows).sortable("cancel");var i=this.resortReact(this.props.clinicians,d,f,h);this.props.setClinicians(i),$.post("counseling/Admin/Settings/Clinician",{command:"sort",moved:d,next:h,prev:f},null,"json").done(function(a){}.bind(this))},render:function(){var a=null,b=null;return null!==this.props.clinicians&&(a=this.props.clinicians.map(function(a,b){return this.state.editRow===b?React.createElement(ClinicianEditRow,_extends({key:a.id},a,{cancel:this.cancel,reload:this.props.reload,fail:this.fail})):React.createElement(ClinicianListRow,_extends({key:a.id},a,{edit:this.edit.bind(null,b),"delete":this["delete"]}))}.bind(this))),this.state.fail&&(b=React.createElement("div",{className:"alert alert-danger"},React.createElement("i",{className:"fa fa-exclamation-triangle"}),"  Failed to update clinician")),React.createElement("div",{id:"sortBox"},b,React.createElement("table",{className:"table table-striped"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null," "),React.createElement("th",null,"Name"))),React.createElement("tbody",{ref:"sortRows"},a)))}}),ClinicianListRow=React.createClass({displayName:"ClinicianListRow",getDefaultProps:function(){return{first_name:null,last_name:null,id:null,edit:null,"delete":null}},render:function(){return React.createElement("tr",{className:"sorting-row","data-rowid":this.props.id,id:this.props.id},React.createElement("td",{className:"col-sm-3"},React.createElement("button",{className:"btn btn-default handle"},React.createElement("i",{className:"fa fa-arrows"}))," ",React.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.props.edit,title:"Edit clinician"},React.createElement("i",{className:"fa fa-edit"}))," ",React.createElement("button",{className:"btn btn-danger btn-sm",onClick:this.props["delete"].bind(null,this.props.id),title:"Delete clinician"},React.createElement("i",{className:"fa fa-times"}))),React.createElement("td",null,this.props.first_name," ",this.props.last_name))}}),ClinicianEditRow=React.createClass({displayName:"ClinicianEditRow",getDefaultProps:function(){return{first_name:null,last_name:null,cancel:null,reload:null}},render:function(){return React.createElement("tr",null,React.createElement("td",{colSpan:"2"},React.createElement(ClinicianForm,{closeForm:this.props.cancel,reload:this.props.reload,fail:this.props.fail,firstName:this.props.first_name,lastName:this.props.last_name,clinicianId:this.props.id})))}}),SettingsDashboard=React.createClass({displayName:"SettingsDashboard",getInitialState:function(){return{tab:"Reasons"}},selectTab:function(a){this.setState({tab:a})},render:function(){return React.createElement("div",{className:"settingsDashboard"},React.createElement("h2",null,"Counseling Check-In Settings"),React.createElement("ul",{className:"nav nav-tabs"},React.createElement(Tab,{active:"Clinicians"==this.state.tab,label:"Clinicians",handleClick:this.selectTab.bind(this,"Clinicians")}),React.createElement(Tab,{active:"Reasons"==this.state.tab,label:"Reasons",handleClick:this.selectTab.bind(this,"Reasons")}),React.createElement(Tab,{active:"Dispositions"==this.state.tab,label:"Dispositions",handleClick:this.selectTab.bind(this,"Dispositions")})),React.createElement("div",{style:{marginTop:"1em"}},React.createElement(Content,{tab:this.state.tab})))}}),Tab=React.createClass({displayName:"Tab",getDefaultProps:function(){return{active:!1,label:null}},render:function(){return React.createElement("li",{role:"presentation",onClick:this.props.handleClick,className:this.props.active?"active":null},React.createElement("a",{className:"pointer"},this.props.label))}}),Content=React.createClass({displayName:"Content",mixins:["TextInput"],getInitialState:function(){return{}},getDefaultProps:function(){return{tab:null}},render:function(){var a=null;switch(this.props.tab){case"Clinicians":a=React.createElement(Clinicians,null);break;case"Reasons":a=React.createElement(Reasons,null);break;case"Visitors":a=React.createElement(Visitors,null);break;case"Visits":a=React.createElement(Visits,null);break;case"Dispositions":a=React.createElement(Dispositions,null)}return React.createElement("div",null,a)}}),BoolIcon=React.createClass({displayName:"BoolIcon",getDefaultProps:function(){return{bool:!0,handleClick:null}},render:function(){var a="1"===this.props.bool?"fa fa-thumbs-o-up text-success":"fa fa-thumbs-o-down text-danger";return null!==this.props.handleClick&&(a+=" pointer"),React.createElement("i",{className:a,onClick:this.props.handleClick})}});ReactDOM.render(React.createElement(SettingsDashboard,null),document.getElementById("settings-dashboard"));var Visitors=React.createClass({displayName:"Visitors",getInitialState:function(){return{}},getDefaultProps:function(){return{}},render:function(){return React.createElement("div",null,"Visitors")}}),Visits=React.createClass({displayName:"Visits",getInitialState:function(){return{}},getDefaultProps:function(){return{}},render:function(){return React.createElement("div",null,"Visits")}});