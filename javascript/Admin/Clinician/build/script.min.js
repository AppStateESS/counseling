"use strict";var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},ClinicianChoose=React.createClass({displayName:"ClinicianChoose",getInitialState:function(){return{timeframe:null}},componentDidMount:function(){this.setTimeframe()},getDefaultProps:function(){return{clinicians:null,choose:null}},setTimeframe:function(){var a,b=new Date,c=b.getHours();switch(c){case c<12:a="Morning";break;case c>17:a="Evening";break;default:a="Afternoon"}this.setState({timeframe:a})},render:function(){var a=null;return a=null!==this.props.clinicians&&this.props.clinicians.length>0?this.props.clinicians.map(function(a,b){return React.createElement(ClinicianRow,_extends({key:b},a,{choose:this.props.choose.bind(null,b)}))}.bind(this)):React.createElement("p",null,"No clinicians found in system."),React.createElement("div",null,React.createElement("h2",null,"Good ",this.state.timeframe,"!"),React.createElement("hr",null),React.createElement("h3",null,"Please click/touch your name to continue..."),React.createElement("div",{className:"row clinician-container"},a))}}),ClinicianRow=React.createClass({displayName:"ClinicianRow",getInitialState:function(){return{}},getDefaultProps:function(){return{first_name:null,last_name:null,id:null,choose:null}},render:function(){return React.createElement("div",{className:"col-sm-12 col-md-6"},React.createElement("button",{className:"clinician btn btn-primary btn-lg btn-block",onClick:this.props.choose},this.props.first_name," ",this.props.last_name))}}),CompleteVisit=React.createClass({displayName:"CompleteVisit",getInitialState:function(){return{dispositions:[]}},getDefaultProps:function(){return{seen:null,clinician:null}},componentDidMount:function(){this.loadData()},loadData:function(){$.getJSON("counseling/Admin/Clinician",{command:"dispositionList"}).done(function(a){this.setState({dispositions:a})}.bind(this))},handleClick:function(a){$.post("counseling/Admin/Clinician",{command:"assignDisposition",dispositionId:a,visitId:this.props.seen.id},null,"json").done(function(a){this.props.setStage("selectVisitor")}.bind(this))},render:function(){var a=null,b=null,c=null;return a=this.state.dispositions.map(function(a,d){return b="btn btn-lg btn-block btn-"+a.color,c="fa fa-"+a.icon,React.createElement("button",{key:d,className:b,onClick:this.handleClick.bind(null,a.id)},React.createElement("i",{className:c})," ",a.title)}.bind(this)),React.createElement("div",null,React.createElement("h2",null,this.props.clinician.first_name," ",this.props.clinician.last_name," meeting with ",this.props.seen.preferred_name," ",this.props.seen.last_name),React.createElement("h3",null,"If your consultation is complete, choose a disposition below."),a,React.createElement("hr",null),React.createElement("div",{className:"text-center"},React.createElement("button",{className:"btn btn-default btn-lg",onClick:this.props.goBack},React.createElement("i",{className:"fa fa-undo"})," Go Back")))}}),ClinicianTimeout=null,ClinicianDashboard=React.createClass({displayName:"ClinicianDashboard",getInitialState:function(){return{clinicians:null,currentClinician:null,stage:"choose",currentlySeen:null}},componentDidMount:function(){this.loadData()},loadData:function(){$.getJSON("counseling/Admin/Clinician",{command:"list"}).done(function(a){this.setState({clinicians:a})}.bind(this))},loadSeen:function(a){$.getJSON("counseling/Admin/Clinician",{command:"currentlySeen",clinicianId:a.id}).done(function(b){b!==!1?this.setState({currentlySeen:b,stage:"completeVisit",currentClinician:a}):this.setState({currentlySeen:null,stage:"selectVisitor",currentClinician:a})}.bind(this))},choose:function(a){var b=this.state.clinicians[a];this.loadSeen(b)},setStage:function(a){this.setState({stage:a})},componentDidUpdate:function(a,b){"reset"==this.state.stage&&(ClinicianTimeout=setTimeout(function(){this.setStage("choose")}.bind(this),5e3))},goBack:function(){clearTimeout(ClinicianTimeout),this.setStage("choose")},render:function(){switch(this.state.stage){case"choose":return React.createElement(ClinicianChoose,{clinicians:this.state.clinicians,choose:this.choose});case"selectVisitor":return React.createElement(SelectVisitor,{clinician:this.state.currentClinician,setStage:this.setStage});case"completeVisit":return React.createElement(CompleteVisit,{clinician:this.state.currentClinician,seen:this.state.currentlySeen,goBack:this.goBack,setStage:this.setStage});case"reset":return React.createElement("div",{className:"well text-center"},React.createElement("h2",null,"Thank you."),React.createElement("h3",null,"Return on completion of your consultation."),React.createElement("button",{className:"btn btn-default btn-lg",onClick:this.goBack},React.createElement("i",{className:"fa fa-undo"})," Go Back"))}}});ReactDOM.render(React.createElement(ClinicianDashboard,null),document.getElementById("clinician-dashboard"));var SelectVisitor=React.createClass({displayName:"SelectVisitor",getInitialState:function(){return{waiting:null,emergencies:null,selectedVisit:null}},getDefaultProps:function(){return{clinician:null}},componentDidMount:function(){this.loadData()},loadData:function(){$.getJSON("counseling/Admin/Clinician",{command:"visitorList"}).done(function(a){null!==a&&this.setState({waiting:a.waiting,emergencies:a.emergencies})}.bind(this))},goBack:function(){this.props.setStage("choose")},reset:function(){this.setState({selectedVisit:null})},select:function(a){this.setState({selectedVisit:a})},startConsultation:function(){var a=this.state.selectedVisit.id,b=this.props.clinician.id;$.post("counseling/Admin/Clinician/",{command:"selectVisit",visitId:a,clinicianId:b},null,"json").done(function(a){this.reset(),this.props.setStage("reset")}.bind(this))},render:function(){if(null!==this.state.selectedVisit)return React.createElement(ConfirmVisitor,{visit:this.state.selectedVisit,goBack:this.reset,startConsultation:this.startConsultation});var a=null;return a=null===this.state.waiting&&null===this.state.emergencies?React.createElement("div",null,React.createElement("div",{className:"alert alert-info"},"No visitors are currently waiting."),React.createElement("div",{className:"go-back text-center"},React.createElement("button",{className:"btn btn-default btn-lg",onClick:this.goBack},React.createElement("i",{className:"fa fa-undo"}),"Go Back"))):React.createElement(SelectVisitorListing,{waiting:this.state.waiting,emergencies:this.state.emergencies,setStage:this.props.setStage,clinician:this.props.clinician,reload:this.loadData,goBack:this.goBack,select:this.select}),React.createElement("div",null,React.createElement("h2",null,"Hello ",this.props.clinician.first_name),React.createElement("hr",null)," ",a)}}),ConfirmVisitor=React.createClass({displayName:"ConfirmVisitor",getDefaultProps:function(){return{visit:null}},render:function(){var a=this.props.visit.visitor;return React.createElement("div",{className:"text-center well"},React.createElement("h2",null,"You have chosen to start a consulation with ",a.preferred_name,a.last_name),React.createElement("div",{className:"go-back"},React.createElement("button",{className:"btn btn-success btn-lg",style:{marginBottom:"1em"},onClick:this.props.startConsultation},React.createElement("i",{className:"fa fa-check"}),"Start consultation"),React.createElement("br",null),React.createElement("button",{className:"btn btn-default btn-3x",onClick:this.props.goBack},React.createElement("i",{className:"fa fa-undo"}),"Start over")))}}),SelectVisitorListing=React.createClass({displayName:"SelectVisitorListing",getDefaultProps:function(){return{waiting:null,emergencies:null}},render:function(){return React.createElement("div",{className:"visitor-listing"},React.createElement(Emergencies,{list:this.props.emergencies,clinician:this.props.clinician,select:this.props.select}),React.createElement(Waiting,{waiting:this.props.waiting,clinician:this.props.clinician,select:this.props.select}),React.createElement("div",{className:"go-back text-center"},React.createElement("button",{className:"btn btn-default btn-lg",onClick:this.props.goBack},React.createElement("i",{className:"fa fa-undo"}),"Go Back")))}}),Emergencies=React.createClass({displayName:"Emergencies",getDefaultProps:function(){return{list:null,clinician:null,select:null}},render:function(){if(null===this.props.list||0===this.props.list.length)return null;var a=this.props.list.map(function(a,b){return React.createElement(VisitorRow,_extends({key:a.id},a,{clinician:this.props.clinician,buttonClass:"danger",select:this.props.select.bind(null,a)}))}.bind(this));return React.createElement("div",null,React.createElement("h3",null,"Emergencies"),a)}}),Waiting=React.createClass({displayName:"Waiting",getDefaultProps:function(){return{waiting:null,clinician:null}},render:function(){var a=React.createElement("div",null,"No walk-ins waiting");return null!==this.props.waiting&&0!==this.props.waiting.length&&(a=this.props.waiting.map(function(a,b){return React.createElement(VisitorRow,_extends({key:a.id},a,{clinician:this.props.clinician,buttonClass:a.color,select:this.props.select.bind(null,a)}))}.bind(this))),React.createElement("div",null,React.createElement("h3",null,"Waiting"),a)}}),VisitorRow=React.createClass({displayName:"VisitorRow",getDefaultProps:function(){return{visitor:null,buttonClass:"success",clinician:null,select:null}},render:function(){var a="btn btn-block btn-lg btn-"+this.props.buttonClass,b=null;"1"==this.props.category&&(b=React.createElement("span",null," - Waiting: ",this.props.wait_time," min."));var c=null!==this.props.visitor.preferred_name?this.props.visitor.preferred_name:this.props.visitor.first_name;return React.createElement("button",{className:a,onClick:this.props.select},React.createElement(CategoryIcon,{category:this.props.category,title:this.props.reason_title})," ",React.createElement("strong",null,c," ",this.props.visitor.last_name),b)}}),CategoryIcon=React.createClass({displayName:"CategoryIcon",getDefaultProps:function(){return{category:0,title:null}},render:function(){var a=null,b="category fa fa-lg "+categoryIcons[this.props.category];return a=React.createElement("i",{className:b,title:this.props.title}),React.createElement("span",null,a)}});